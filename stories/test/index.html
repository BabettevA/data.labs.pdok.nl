<!doctype html>
<html>
  <head>
    <link href="https://nightly.yasgui.triply.cc/build/yasgui.min.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Testing the new Data Stories</h1>
    <h2>Switch background tiles</h2>
    <p>
      For 2D maps it is now possible to configure an arbitrary number
      of background tiles.  The user can switch between these
      background tiles with a dropdown menu, and the currently
      selected background tile is saved as part of the query
      string.
    </p>
    <query data-config="http://127.0.0.1:4000/stories/test/#query=prefix%20geo%3A%20%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix%20owl%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2002%2F07%2Fowl%23%3E%0Aprefix%20rdfs%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix%20rvo%3A%20%3Chttps%3A%2F%2Fdata.labs.pdok.nl%2Frvo%2Fdef%2F%3E%0Aselect%20%3Fshape%20%3FshapeLabel%20%7B%0A%20%20%3Fland%20a%20rvo%3ALand%3B%0A%20%20%20%20owl%3AsameAs%2Fgeo%3AhasGeometry%2Fgeo%3AasWKT%20%3Fshape%3B%0A%20%20%20%20rdfs%3Alabel%20%3Fnaam%3B%0A%20%20%20%20rvo%3Avlag%20%3Furl.%0A%20%20bind(concat(%0A%20%20%20%20'%3Ca%20href%3D%22https%3A%2F%2Fdemo.triply.cc%2Frvo%2Flanden%2Fbrowser%3Fresource%3D'%2Cencode_for_uri(%3Fland)%2C'%22%20target%3D%22_blank%22%3E%3Ch2%3E'%2C%3Fnaam%2C'%3C%2Fh2%3E%3C%2Fa%3E'%2C%0A%20%20%20%20'%3Cimg%20src%3D%22'%2C%3Furl%2C'%22%20width%3D%22300%22%3E')%20as%20%3FshapeLabel)%0A%7D%0A&endpoint=https%3A%2F%2Fapi.demo.triply.cc%2Fdatasets%2Frvo%2Flanden%2Fservices%2Fsparql%2Fsparql&requestMethod=POST&tabTitle=Query&headers=%7B%7D&contentTypeConstruct=text%2Fturtle%2C*%2F*%3Bq%3D0.9&contentTypeSelect=application%2Fsparql-results%2Bjson%2C*%2F*%3Bq%3D0.9&outputFormat=geo&outputSettings=%7B%22map%22%3A%22osm%22%2C%22grouped%22%3Afalse%7D"
           data-endpoint="https://api.demo.triply.cc/datasets/rvo/landen/services/sparql/sparql"
           data-output="geo"
           data-query-ref="rvo-landen.rq">
    </query>
    <h2>Grouping</h2>
    <p>
      For 2D maps, the user can choose to group the shapes.  This us
      usefull when the user is not interested in the specifics of each
      shape, but wants to get an overview of where the shapes are
      located (displayed as grouped regions).  This is also useful
      when multiple shapes are displayed at the same location, e.g.,
      when one multi-story building has multiple addresses.
    </p>
    <p>
      Also, 2D polygons can now be clicked to display their
      corresponding popup.  (This used to be implemented with pins,
      but these are now reserved for points.)
    </p>
    <p>
      Finally, when a result set includes multiple polygons, one
      displayed on top of another, the polygons are layered so that
      the smaller one is displayed on top of the later one.  E.g.,
      this makes it possible to click on a building that is located on
      a plot of land.
    </p>
    <query data-config="http://127.0.0.1:4000/stories/test/#query=prefix%20bag%3A%20%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix%20geo%3A%20%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix%20rdfs%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aselect%0A%20%20%3FshapeVerblijfsobject%0A%20%20%3FshapeVerblijfsobjectColor%0A%20%20%3FshapeVerblijfsobjectLabel%0A%20%20%3FshapePand%0A%20%20%3FshapePandLabel%0A%7B%0A%20%20bind(%22Science%20Park%22%20as%20%3FstreetName)%0A%20%20graph%20%3Fg1%20%7B%0A%20%20%20%20%3FopenbareRuimte%20bag%3AbijbehorendeWoonplaats%20%3Fwoonplaats%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3AnaamOpenbareRuimte%20%3FstreetName.%0A%20%20%7D%0A%20%20filter%20not%20exists%20%7B%20%3Fg1%20bag%3AeindGeldigheid%20_%3A1.%20%7D%0A%20%20%3Fwoonplaats%20rdfs%3Alabel%20%22Amsterdam%22%40nl.%0A%20%20graph%20%3Fg2%20%7B%0A%20%20%20%20%3Fnummeraanduiding%20bag%3AbijbehorendeOpenbareRuimte%20%3FopenbareRuimte%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Ahuisnummer%20%3Fhuisnummer%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Apostcode%20%3Fpostcode.%0A%20%20%7D%0A%20%20filter%20not%20exists%20%7B%20%3Fg2%20bag%3AeindGeldigheid%20_%3A2.%20%7D%0A%20%20graph%20%3Fg3%20%7B%0A%20%20%20%20%3Fverblijfsobject%20a%20%3Fclass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Ahoofdadres%20%3Fnummeraanduiding%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Apandrelatering%20%3Fpand%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20geo%3AhasGeometry%2Fgeo%3AasWKT%20%3FshapeVerblijfsobject.%0A%20%20%7D%0A%20%20filter%20not%20exists%20%7B%20%3Fg3%20bag%3AeindGeldigheid%20_%3A3.%20%7D%0A%20%20%3Fclass%20rdfs%3Alabel%20%3Flabel.%0A%20%20graph%20%3Fg4%20%7B%0A%20%20%20%20%3Fpand%20bag%3AgeometriePand%2Fgeo%3AasWKT%20%3FshapePand.%0A%20%20%7D%0A%20%20filter%20not%20exists%20%7B%20%3Fg4%20bag%3AeindGeldigheid%20_%3A4.%20%7D%0A%20%20bind(concat(str(%3FstreetName)%2C'%20'%2Cstr(%3Fhuisnummer))%20as%20%3FshapePandLabel)%0A%20%20bind(concat(%3FshapePandLabel%2C'%20'%2Cstr(%3Fpostcode)%2C'%3Cbr%3E'%2Cstr(%3Flabel))%20as%20%3FshapeVerblijfsobjectLabel)%0A%20%20bind(%22red%22%20as%20%3FshapeVerblijfsobjectColor)%0A%7D%0Alimit%201000%0A&endpoint=https%3A%2F%2Fdata.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Query&headers=%7B%7D&contentTypeConstruct=text%2Fturtle%2C*%2F*%3Bq%3D0.9&contentTypeSelect=application%2Fsparql-results%2Bjson%2C*%2F*%3Bq%3D0.9&outputFormat=geo&outputSettings=%7B%22map%22%3A%22nlmaps%22%2C%22grouped%22%3Afalse%7D"
           data-endpoint="https://data.pdok.nl/sparql"
           data-output="geo"
           data-query-ref="geo.rq">
    </query>
    <h2>3D visualization</h2>
    <p>
      Developed as a prototype during the 3D High5, 3D SPARQL
      visualization now works on more browsers and platforms, and is
      now also part of Data Stories.
    </p>
    <query data-config="https://nightly.yasgui.triply.cc/#query=prefix%20bag%3A%20%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fdef%2Fbag%23%3E%0Aprefix%20beeldbank%3A%20%3Chttps%3A%2F%2Fcultureelerfgoed.nl%2Fvocab%2F%3E%0Aprefix%20dbo%3A%20%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0Aprefix%20dct%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0Aprefix%20energie%3A%20%3Chttp%3A%2F%2Fdata.labs.pdok.nl%2Fdataset%2Fenergie%23%3E%0Aprefix%20foaf%3A%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0Aprefix%20gemeente%3A%20%3Chttps%3A%2F%2Fdata.pdok.nl%2Fcbs%2Fid%2Fgemeente%2F%3E%0Aprefix%20geo%3A%20%3Chttp%3A%2F%2Fwww.opengis.net%2Font%2Fgeosparql%23%3E%0Aprefix%20graph%3A%20%3Chttps%3A%2F%2Fdata.labs.pdok.nl%2Fgraph%2F%3E%0Aprefix%20kvk%3A%20%3Chttp%3A%2F%2Fdata.labs.pdok.nl%2Fdataset%2Fbedrijf%23%3E%0Aprefix%20monumenten%3A%20%3Chttp%3A%2F%2Flod.kb.nl%2Frce%2Fvocab%2Fid%2F01%2Fceo%23%3E%0Aprefix%20rdfs%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0Aprefix%20schema%3A%20%3Chttp%3A%2F%2Fschema.org%2F%3E%0Aprefix%20vcard%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2006%2Fvcard%2Fns%23%3E%0Aselect%20%3Fshape%20%3FshapeColor%20%3FshapeHeight%20%3FshapeName%20(sample(%3FshapeLabel)%20as%20%3FshapeLabel)%20%7B%0A%20%20graph%20graph%3A3d-bag%20%7B%0A%20%20%20%20%3FopenbareRuimte%20bag%3AnaamOpenbareRuimte%20%3FopenbareRuimteNaam%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3AbijbehorendeWoonplaats%20%3Fwoonplaats%20.%0A%20%20%20%20%3Fwoonplaats%20bag%3AnaamWoonplaats%20%3FwoonplaatsNaam%20.%0A%20%20%20%20%3Fnummeraanduiding%20bag%3AbijbehorendeOpenbareRuimte%20%3FopenbareRuimte%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Ahuisnummer%20%3Fhuisnummer%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Apostcode%20%3Fpostcode%20.%0A%20%20%20%20%3Fverblijfsobject%20bag%3Ahoofdadres%20%3Fnummeraanduiding%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Aoppervlakte%20%3Foppervlakte%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Apandrelatering%20%3Fpand%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bag%3Astatus%20%3FverblijfsobjectStatus%20.%0A%20%20%20%20%3FverblijfsobjectStatus%20rdfs%3Alabel%20%3FverblijfsobjectStatusLabel%20.%0A%20%20%20%20%3Fpand%20geo%3AhasGeometry%2Fgeo%3AasWKT%20%3Fshape%20%3B%0A%20%20%20%20%20%20%20%20%20%20bag%3AoorspronkelijkBouwjaar%20%3Fbouwjaar%20%3B%0A%20%20%20%20%20%20%20%20%20%20bag%3Astatus%20%3FpandStatus%20.%0A%20%20%20%20%3FpandStatus%20rdfs%3Alabel%20%3FpandStatusLabel%20.%0A%20%20%7D%0A%20%20%3Fpand%20schema%3Aheight%20%3FshapeHeight%20.%0A%20%20%23%20energielabel%0A%20%20optional%20%7B%0A%20%20%20%20%3Fmeting%20energie%3Aep%20%3Fep%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20energie%3Ae_label%20%3Fenergielabel%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20energie%3Aopname_datum%20%3Fopnamedatum%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20energie%3Apand_huisnummer%20%3Fhuisnummer0%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20energie%3Apand_postcode%20%3Fpostcode%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20energie%3Aregistratie_datum%20%3Fregistratiedatum%20.%0A%20%20%20%20filter%20(str(%3Fhuisnummer)%20%3D%20%3Fhuisnummer0)%0A%20%20%7D%0A%20%20%23%20bedrijf%0A%20%20optional%20%7B%0A%20%20%20%20%3Fbedrijf%20kvk%3Aplaats%20%22Zwolle%22%5E%5Exsd%3Astring%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20kvk%3AlegalFormDescription%20%3Flegal%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20kvk%3AsbiOmschrijving%20%3Fsbi%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20kvk%3Ahuisnummer%20%3Fhuisnummer%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20schema%3AlegalName%20%3Fnaam%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20kvk%3Astraat%20%3Fstraat%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20kvk%3Apostcode%20%3Fpostcode%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20schema%3AnumberOfEmployees%20%3Fwerknemers%20.%0A%20%20%7D%0A%20%20%23%20monument%0A%20%20optional%20%7B%0A%20%20%20%20graph%20graph%3A3d-rce%20%7B%0A%20%20%20%20%20%20%3Fmonument%20monumenten%3AhasLink%20%3FmonumentUrl%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20monumenten%3AhasPostCode%20%3Fpostcode%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20monumenten%3AhasRijksmonumentNumber%20%3Fcode%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20monumenten%3AhasRijksmonumentDefinition%20%3Fbeschrijving%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20monumenten%3AhasStreetNumber%20%3Fhuisnummer%20.%0A%20%20%20%20%7D%0A%20%20%20%20bind(IRI(concat('https%3A%2F%2Fcultureelerfgoed.nl%2Fid%2Fmonument%2F'%2Cstr(%3Fcode)))%20as%20%3Fx)%0A%20%20%20%20optional%20%7B%0A%20%20%20%20%20%20%3Fafbeelding%20foaf%3Adepicts%20%3Fx%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20beeldbank%3Alocator%20%3FafbeeldingUrl%20.%0A%20%20%20%20%7D%0A%20%20%20%20bind(concat('%3Ca%20href%3D%22'%2Cstr(%3FafbeeldingUrl)%2C'%22%20target%3D%22_blank%22%3E%3Cimg%20src%3D%22'%2Cstr(%3FafbeeldingUrl)%2C'%22%20style%3D%22max-height%3A%20100px%3B%22%3E%3C%2Fa%3E')%20as%20%3FafbeeldingLabel)%0A%20%20%7D%0A%20%20%23%20HTML%20label%3A%20RCE%0A%20%20bind(if(bound(%3FafbeeldingLabel)%2Cconcat('%3Ch5%3E%F0%9F%96%BC%20Beelden%20uit%20de%20beeldbank%3A%3C%2Fh5%3E%3Cdiv%20style%3D%22max-height%3A125px%3B%20overflow-y%3A%20scroll%3B%22%3E'%2C%3FafbeeldingLabel%2C'%3C%2Fdiv%3E')%2C'')%20as%20%3FmonumentString1)%0A%20%20bind(if(bound(%3Fcode)%2Cconcat('%3Ch5%3E%E2%9B%AA%20%3Ca%20href%3D%22'%2Cstr(%3FmonumentUrl)%2C'%22%20target%3D%22_blank%22%3EMonument%20'%2Cstr(%3Fcode)%2C'%3C%2Fa%3E%3C%2Fh5%3E%3Cp%20style%3D%22max-height%3A%20125px%3B%20overflow-y%3A%20scroll%3B%22%3E'%2Cstr(%3Fbeschrijving)%2C'%3C%2Fp%3E'%2C%3FmonumentString1)%2C'')%20as%20%3FmonumentString2)%0A%20%20bind(%0A%20%20%20%20if(bound(%3Fenergielabel)%2C%0A%20%20%20%20%20%20if(strstarts(%3Fenergielabel%2C%20%22A%22)%2C%20%22%2322b14c%22%2C%0A%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22B%22%2C%20%22%238ff334%22%2C%0A%20%20%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22C%22%2C%20%22%23bdfc2c%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22D%22%2C%20%22%23fff200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22E%22%2C%20%22%23ff9a35%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22F%22%2C%20%22%23ff7f27%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%3Fenergielabel%3D%22G%22%2C%20%22%23ed1c24%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22grey%22)))))))%2C%0A%20%20%20%20%20%20%20%20if(bound(%3Fbedrijf)%2C%20%22%234169e188%22%2C%0A%20%20%20%20%20%20%20%20%20%20if(bound(%3Fmonument)%2C%20%22%234169e188%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%234169e133%22))%0A%20%20%20%20)%20as%20%3FshapeColor)%0A%20%20%23%20HTML%20label%3A%20RVO%0A%20%20bind(if(bound(%3Fmeting)%2Cconcat('%3Csvg%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ccircle%20cx%3D%2210%22%20cy%3D%2210%22%20fill%3D%22'%2Cstr(%3FshapeColor)%2C'%22%20r%3D%2210%22%2F%3E%3C%2Fsvg%3E%20')%2C'')%20as%20%3FenergielabelString1)%0A%20%20bind(if(bound(%3Fmeting)%2Cconcat('%3Ch5%3E%F0%9F%97%B2%20Energielabel%20informatie%3A%3C%2Fh5%3E%3Cul%3E%3Cli%3EEnergielabel%3A%20'%2Cstr(%3Fenergielabel)%2C'%3C%2Fli%3E%3Cli%3EEP%3A%20'%2Cstr(%3Fep)%2C'%3C%2Fli%3E%3Cli%3EOpnamedatum%3A%20'%2Cstr(%3Fopnamedatum)%2C'%3C%2Fli%3E%3Cli%3ERegistratiedatum%3A%20'%2Cstr(%3Fregistratiedatum)%2C'%3C%2Fli%3E%3C%2Ful%3E%3Ch5%3E')%2C'')%20as%20%3FenergielabelString2)%0A%20%20%23%20HTML%20label%3A%20KvK%0A%20%20bind(if(bound(%3Fbedrijf)%2Cconcat('%3Ch5%3E%F0%9F%8F%AA%20KvK%20informatie%3A%3C%2Fh5%3E%3Cul%3E%3Cli%3E'%2Cstr(%3Fnaam)%2C'%3C%2Fli%3E%3Cli%3E'%2Cstr(%3Flegal)%2C'%3C%2Fli%3E%3Cli%3ESBI%3A%20'%2Cstr(%3Fsbi)%2C'%3C%2Fli%3E%3Cli%3EWerknemers%3A%20'%2Cstr(%3Fwerknemers)%2C'%3C%2Fli%3E%3C%2Ful%3E')%2C'')%20as%20%3FbedrijfString)%0A%20%20%23%20HTML%20label%0A%20%20bind(if(%3Fpand%3D%3Chttp%3A%2F%2Fbag.basisregistraties.overheid.nl%2Fbag%2Fid%2Fpand%2F0193100000000169%3E%2Cconcat('%3Cvideo%20src%3D%22https%3A%2F%2Fwouterbeek.github.io%2Fresource%2Fvid%2Fgrote-kerk-zwolle.mp4%22%20autoplay%20height%3D%22250%22%20loop%3E%3C%2Fvideo%3E')%2C'')%20as%20%3Fvid)%0A%20%20bind(concat('%3Ch4%3E'%2C%3FenergielabelString1%2Cstr(%3FopenbareRuimteNaam)%2C'%20'%2Cstr(%3Fhuisnummer)%2C'%2C%20'%2Cstr(%3Fpostcode)%2C'%20'%2Cstr(%3FwoonplaatsNaam)%2C'%3C%2Fh4%3E'%2C%3Fvid%2C%3FenergielabelString2%2C%3FbedrijfString%2C%3FmonumentString2%2C'%3Ch5%3E%3Ca%20href%3D%22'%2Cstr(%3Fverblijfsobject)%2C'%22%3EVerblijfsobject%3C%2Fa%3E%3A%3C%2Fh5%3E%3Cul%3E%3Cli%3EWoonplaats%3A%20%3Ca%20href%3D%22'%2Cstr(%3Fwoonplaats)%2C'%22%3E'%2Cstr(%3FwoonplaatsNaam)%2C'%3C%2Fa%3E%3C%2Fli%3E%3Cli%3EOppervlakte%3A%20'%2Cstr(%3Foppervlakte)%2C'm%C2%B2%3C%2Fli%3E%3Cli%3EStatus%3A%20%3Ca%20href%3D%22'%2Cstr(%3FverblijfsobjectStatus)%2C'%22%3E'%2Cstr(%3FverblijfsobjectStatusLabel)%2C'%3C%2Fa%3E%3C%2Fli%3E%3C%2Ful%3E%3Ch5%3E%3Ca%20href%3D%22'%2Cstr(%3Fpand)%2C'%22%3EPand%3C%2Fa%3E%3A%3C%2Fh5%3E%3Cul%3E%3Cli%3EBouwjaar%3A%20'%2Cstr(%3Fbouwjaar)%2C'%3C%2Fli%3E%3Cli%3EStatus%3A%20%3Ca%20href%3D%22'%2Cstr(%3FpandStatus)%2C'%22%3E'%2Cstr(%3FpandStatusLabel)%2C'%3C%2Fa%3E%3C%2Fli%3E%3C%2Ful%3E')%20as%20%3FshapeLabel)%0A%20%20%23%20tekst%20label%0A%20%20bind(concat(str(%3FopenbareRuimteNaam)%2C'%20'%2Cstr(%3Fhuisnummer)%2C'%2C%20'%2Cstr(%3FwoonplaatsNaam))%20as%20%3FshapeName)%0A%7D%0Agroup%20by%20%3Fshape%20%3FshapeColor%20%3FshapeHeight%20%3FshapeName%0Alimit%20250%0A&endpoint=https%3A%2F%2Fdata.labs.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=BAG%20in%20context&headers=%7B%7D&contentTypeConstruct=text%2Fturtle%2C*%2F*%3Bq%3D0.9&contentTypeSelect=application%2Fsparql-results%2Bjson%2C*%2F*%3Bq%3D0.9&outputFormat=geo3d"
           data-endpoint="https://data.labs.pdok.nl/sparql"
           data-output="geo3d"
           data-query-ref="geo3d.rq">
    </query>
    <h2>Gallery</h2>
    <p>
      Image banks are very common in Open Governmental Data.  With the
      gallery plugin, a picture gallery can be directly created from a
      SPARQL query.  This example shows images from the image bank
      published by the National Archives.
    </p>
    <query data-config="http://127.0.0.1:4000/stories/test/#query=prefix%20dc%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%3E%0Aprefix%20schema%3A%20%3Chttp%3A%2F%2Fschema.org%2F%3E%0Aprefix%20xsd%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0Aselect%20*%20%7B%0A%20%20%7B%0A%20%20%20%20select%0A%20%20%20%20%20%20%3Fimage%0A%20%20%20%20%20%20(strdt(%3F_date%2C%20xsd%3Adate)%20as%20%3Fdate)%0A%20%20%20%20%20%20%3Fdescription%0A%20%20%20%20%20%20(group_concat(distinct%20%3Fformat%3B%20separator%3D'%2C%20')%20as%20%3Fformat)%0A%20%20%20%20%20%20(group_concat(distinct%20%3Fsubject%3B%20separator%3D'%2C%20')%20as%20%3Fsubject)%0A%20%20%20%20%20%20(min(str(%3Furl))%20as%20%3Furl)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%3Fimage%20dc%3Adate%20%3F_date%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20dc%3Adescription%20%3Fdescription%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20dc%3Aformat%20%3Fformat%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20dc%3Asubject%20%3Fsubject%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20schema%3AcontentLocation%20%22Apeldoorn%22%5E%5Exsd%3Astring%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20schema%3Athumbnail%20%3Furl%20.%0A%20%20%20%20%20%20filter(str(%3F_date)%20!%3D%20%22000-00-00%22)%0A%20%20%20%20%7D%0A%20%20%20%20group%20by%20%3Fimage%20%3F_date%20%3Fdescription%0A%20%20%7D%0A%20%20bind(concat('%3Cimg%20src%3D%22'%2C%3Furl%2C'%22%3E'%2C%0A%20%20%20%20%20%20'%3Cp%3E%3Cb%3EDatum%3C%2Fb%3E%3A%20'%2Cstr(year(%3Fdate))%2C'-'%2Cstr(month(%3Fdate))%2C'-'%2Cstr(day(%3Fdate))%2C%0A%20%20%20%20%20%20'%3Cbr%3E%3Cb%3EBeschrijving%3C%2Fb%3E%3A%20'%2C%3Fdescription%2C%0A%20%20%20%20%20%20if(%3Fformat%3D''%2C''%2Cconcat('%3Cbr%3E%3Cb%3EFormaten%3C%2Fb%3E%3A%20'%2C%3Fformat%2C'.'))%2C%0A%20%20%20%20%20%20if(%3Fsubject%3D''%2C''%2Cconcat('%3Cbr%3E%3Cb%3EOnderwerpen%3C%2Fb%3E%3A%20'%2C%3Fsubject%2C'.'))%2C%0A%20%20%20%20%20%20'')%20as%20%3Fwidget)%0A%7D%0Aorder%20by%20desc(%3Fdate)%0Alimit%20100%0A&endpoint=https%3A%2F%2Fdata.labs.pdok.nl%2Fsparql&requestMethod=POST&tabTitle=Query&headers=%7B%7D&contentTypeConstruct=text%2Fturtle%2C*%2F*%3Bq%3D0.9&contentTypeSelect=application%2Fsparql-results%2Bjson%2C*%2F*%3Bq%3D0.9&outputFormat=gallery"
           data-endpoint="https://data.labs.pdok.nl/sparql"
           data-output="gallery"
           data-query-ref="gallery.rq"></query>
    </query>
    <script src="https://nightly.yasgui.triply.cc/build/yasgui.min.js"></script>
    <script type="text/javascript">window.onload = function () { Yasgui.stories(); }</script>
  </body>
</html>
