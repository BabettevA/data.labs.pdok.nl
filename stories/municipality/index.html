<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Nederlandse gemeentes">
    <link rel="icon" href="/resource/img/logo.svg">
    <title>Kadaster Data Stories â€• Nederlandse gemeentes</title>
    <link href="/resource/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/resource/css/main.css" rel="stylesheet" type="text/css">
    <link href="/resource/css/yasgui.min.css" rel="stylesheet" type="text/css">
  </head>
  <body class="withNavbar">
    <nav class="navbar fixed-top ">
      <div class="navbar-content">
        <div class="navbar-icon">
          <a class="navbar-brand" href="/stories">
            <img src="/resource/img/logo.svg">
          </a>
        </div>
        <div class="navbar-title">
          <a class="navbar-brand" href="/stories">
            Kadaster Data Stories
          </a>
        </div>
      </div>
    </nav>
    <div class="container story"
         data-query-endpoint="https://data.pdok.nl/sparql"
         data-query-output="leaflet">
      <h1>Dutch Municipalities</h1>
      <p>
        We want to show the 25 Dutch municipalities with the largest
        surface.  Unfortunately, GeoSPARQL does not have an area
        function.  We therefore decided <em>to implement this function
        ourselves in SPARQL</em>.  We use the <tt>geof:envelope</tt>
        function in order to extract the closest bounding box of a
        municipality, for which we can calculate the area using simple
        arithmetic and geometric conversion (from long/lat distance to
        meters).  The following shows the shape of
        <a href="https://bag.basisregistraties.overheid.nl/bag/doc/woonplaats/1527">Baak</a>
        and the smallest bounding box that holds it:
      </p>
      <div data-query data-query-sparql="baarn_surface.rq"></div>
      <h2>The biggest Dutch municipalities</h2>
      <p>
        We can now sort the municipalities based on their surface. The
        following gives an overview of the 25 largest municipalities.
        Zeewolde is larger than Amsterdam!
      </p>
      <div data-query
           data-query-sparql="largest_municipalities.rq"
           data-query-output="gchart">
      </div>
      <p>
        The same result can also be shown on a map.  Notice that big
        municipalities often have a large water surface.
      </p>
      <div data-query
           data-query-sparql="largest_municipalities_geo.rq">
      </div>
      <h2>Most populous Dutch municipalities</h2>
      <p>
        Using SPARQL federation, we can dynamically pull in the
        population numbers for each municipality.  This allows us to
        display the 25 most populous municipalities.  With YASGUI, we
        are able to put these results on a map and show nice popups
        per result.  The popup shows the name of the municipality, the
        population, the surface, and also links to the RDF resource
        (using URI dereferencing).
      </p>
      <div data-query
           data-query-sparql="most_populous_municipalities.rq">
      </div>
    </div>
    <script src="/resource/js/jquery-3.2.1.min.js"></script>
    <script src="/resource/js/tether-1.3.3.min.js"></script>
    <script src="/resource/js/bootstrap.min.js"></script>
    <script src="/resource/js/yasgui.min.js"></script>
    <script type="text/javascript">
YASGUI.YASR.plugins.leaflet.defaults.defaultMap = "nlmaps";
YASGUI.sparqlStories();
    </script>
  </body>
</html>
