prefix cbs: <https://data.pdok.nl/cbs/vocab/>
prefix gemeente: <https://data.pdok.nl/cbs/id/gemeente/>
prefix geo: <http://www.opengis.net/ont/geosparql#>
prefix gg: <http://www.gemeentegeschiedenis.nl/provincie/>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix verblijfsobject: <http://bag.basisregistraties.overheid.nl/bag/id/verblijfsobject/>
select ?wkt ?wktColor ?wktLabel {
  graph <https://data.pdok.nl/cbs/graph/2015> {
    ?gemeente a cbs:Gemeente ;
              geo:hasGeometry/geo:asWKT ?wkt ;
              cbs:gemeenteNaam ?buurtNaam ;
              cbs:attractieAfstand ?value .
    bind ((46.5 - xsd:float(?value)) / 46.5 as ?normalized)
    bind (concat("jet,",?normalized) as ?wktColor)
  }
  { ?gemeente geo:sfWithin* gg:Groningen } union { ?gemeente geo:sfWithin* gg:Friesland }
  cbs:attractieAfstand rdfs:label ?label ; rdfs:comment ?desc .
  bind (concat('<h3>',?label,': ',?value,'km</h3><p>',?desc,'</p>') as ?wktLabel)
}
